"use strict";(self.webpackChunk_ask_ell_jest_typescript_starter=self.webpackChunk_ask_ell_jest_typescript_starter||[]).push([[45],{"./src/carousel/carousel.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{WithFailingLoading:()=>WithFailingLoading,WithImages:()=>WithImages,WithoutInputs:()=>WithoutInputs,__namedExportsOrder:()=>__namedExportsOrder,default:()=>carousel_stories});var common=__webpack_require__("./src/common/index.ts");const carouselComponentTag=new common._g("carousel"),carouselImageContainerComponentTag=new common._g("carousel-image-container"),carouselArrowComponentTag=new common._g("carousel-arrow");class CarouselArrow{constructor(symbol){const element=(0,common.f3)(Window).document.createElement("span");element.innerText=symbol,element.classList.add(carouselArrowComponentTag.toString()),this.element=element}}class CarouselLeftArrow extends CarouselArrow{constructor(root){super("<");const rootLeftPaddingValue=(0,common.f3)(Window).getComputedStyle(root).getPropertyValue("padding-left");this.element.style.left=rootLeftPaddingValue}}class CarouselRightArrow extends CarouselArrow{constructor(root){super(">");const rootRightPaddingValue=(0,common.f3)(Window).getComputedStyle(root).getPropertyValue("padding-right");this.element.style.right=rootRightPaddingValue}}class DomCacheService{cacheDomElementTag=new common._g("cache");cache=(0,common.f3)(Window).document.createElement(this.cacheDomElementTag.toString());constructor(){this.cache.style.position="absolute",this.cache.style.zIndex="-1000",this.cache.style.opacity="0",(0,common.f3)(Window).document.body.appendChild(this.cache)}static getInstance(){return DomCacheService.instance||(DomCacheService.instance=new DomCacheService),DomCacheService.instance}preloadImage({src}){return new Promise(((resolve,reject)=>{const image=new Image;image.onload=()=>{resolve()},image.onerror=reject,image.src=src,this.cache.appendChild(image)}))}}const hiddenElementClass=`${carouselImageContainerComponentTag.toString()}-hidden`,fromMiddleToLeftAnimationClass=`${carouselImageContainerComponentTag.toString()}-from-middle-to-left`,fromMiddleToRightAnimationClass=`${carouselImageContainerComponentTag.toString()}-from-middle-to-right`,fromLeftToMiddleAnimationClass=`${carouselImageContainerComponentTag.toString()}-from-left-to-middle`,fromRightToMiddleAnimationClass=`${carouselImageContainerComponentTag.toString()}-from-right-to-middle`;class Carousel extends HTMLElement{currentIndex=0;previousIndex=this.currentIndex+1;imageContainers=new Array;constructor(){super(),this.classList.add(carouselComponentTag.toString());const encodedImages=this.getAttribute("images");if(encodedImages){const images=(0,common.pe)(encodedImages);this.createImageContainers(images)}}createImageContainers(images){const imagesPreloaders=new Array,domCacheService=DomCacheService.getInstance();images.forEach(((image,index)=>{const imageContainer=(0,common.f3)(Window).document.createElement("div");imageContainer.classList.add(carouselImageContainerComponentTag.toString()),index!=this.currentIndex&&imageContainer.classList.add(hiddenElementClass),imageContainer.style.backgroundImage=`url("${image.src}")`,this.imageContainers.push(imageContainer),this.appendChild(imageContainer),imagesPreloaders.push(domCacheService.preloadImage(image).catch((()=>{this.imageContainers[index].innerText="Error: unreachable resource"})))})),Promise.all(imagesPreloaders),this.imageContainers.length>1&&this.createArrows()}createArrows(){const leftArrow=new CarouselLeftArrow(this);this.appendChild(leftArrow.element),leftArrow.element.addEventListener("click",(()=>{this.timeOut||this.setCurrentIndex(0===this.currentIndex?this.imageContainers.length-1:this.currentIndex-1)}));const rightArrow=new CarouselRightArrow(this);this.appendChild(rightArrow.element),rightArrow.element.addEventListener("click",(()=>{this.timeOut||this.setCurrentIndex(this.currentIndex===this.imageContainers.length-1?0:this.currentIndex+1)}))}setCurrentIndex(currentIndex){this.previousIndex=this.currentIndex,this.currentIndex=currentIndex,this.runAnimations()}runAnimations(){this.imageContainers[this.currentIndex].classList.remove(hiddenElementClass);const isToTheRight=this.currentIndex===this.previousIndex+1||0===this.currentIndex&&this.previousIndex===this.imageContainers.length-1,previousImageContainerClass=isToTheRight?fromMiddleToLeftAnimationClass:fromMiddleToRightAnimationClass;this.imageContainers[this.previousIndex].classList.add(previousImageContainerClass);const currentImageContainerClass=isToTheRight?fromRightToMiddleAnimationClass:fromLeftToMiddleAnimationClass;this.imageContainers[this.currentIndex].classList.add(currentImageContainerClass),this.timeOut=setTimeout((()=>{this.imageContainers[this.previousIndex].classList.remove(previousImageContainerClass),this.imageContainers[this.previousIndex].classList.add(hiddenElementClass),this.imageContainers[this.currentIndex].classList.remove(currentImageContainerClass),clearTimeout(this.timeOut),this.timeOut=void 0}),500)}}!function importCarouselComponent(){(0,common.DS)(carouselComponentTag,Carousel)}();const carousel_stories={title:"Components/Carousel"},style="width: 100%; height: 400px;",WithoutInputs={name:"Without images",render:()=>`<${carouselComponentTag.toString()} style="${style}"></${carouselComponentTag.toString()}>`},carousel_stories_images=[...Array(3).keys()].map(((_,index)=>({src:`https://images.pexels.com/photos/266211${index}/pexels-photo-266211${index}.jpeg?auto=compress&cs=tinysrgb&w=1600`}))),WithImages={name:"With images",render:()=>`<${carouselComponentTag.toString()} style="${style}" images="${(0,common.HI)(carousel_stories_images)}"></${carouselComponentTag.toString()}>`},WithFailingLoading={name:"With failing loading",render:()=>`<${carouselComponentTag.toString()} style="${style}" images="${(0,common.HI)([{src:"fakeurl.com"},{src:"fakeurl2.com"}])}"></${carouselComponentTag.toString()}>`};WithoutInputs.parameters={...WithoutInputs.parameters,docs:{...WithoutInputs.parameters?.docs,source:{originalSource:"{\n  name: 'Without images',\n  render: () => `<${carouselComponentTag.toString()} style=\"${style}\"></${carouselComponentTag.toString()}>`\n}",...WithoutInputs.parameters?.docs?.source}}},WithImages.parameters={...WithImages.parameters,docs:{...WithImages.parameters?.docs,source:{originalSource:'{\n  name: \'With images\',\n  render: () => `<${carouselComponentTag.toString()} style="${style}" images="${encrypt(images)}"></${carouselComponentTag.toString()}>`\n}',...WithImages.parameters?.docs?.source}}},WithFailingLoading.parameters={...WithFailingLoading.parameters,docs:{...WithFailingLoading.parameters?.docs,source:{originalSource:'{\n  name: \'With failing loading\',\n  render: () => `<${carouselComponentTag.toString()} style="${style}" images="${encrypt([{\n    src: "fakeurl.com"\n  }, {\n    src: "fakeurl2.com"\n  }])}"></${carouselComponentTag.toString()}>`\n}',...WithFailingLoading.parameters?.docs?.source}}};const __namedExportsOrder=["WithoutInputs","WithImages","WithFailingLoading"]},"./src/common/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_g:()=>ComponentTag,pe:()=>decrypt,DS:()=>defineWebComponent,HI:()=>encrypt,f3:()=>inject});class ComponentTag{constructor(componentName){this.value=`ask-ell-${componentName}`}toString(){return this.value}}class CommonError extends Error{constructor(message){super(message)}}class EvenDefinedComponentError extends CommonError{constructor(componentTag){super(`"${componentTag.toString()}" is event defined`)}}function inject(token){return window}function defineWebComponent(componentTag,_constructor){if(inject(Window).customElements.get(componentTag.toString()))throw new EvenDefinedComponentError(componentTag);inject(Window).customElements.define(componentTag.toString(),_constructor)}function encrypt(data){let dataToEncrypt="object"==typeof data?JSON.stringify(data):String(data);return btoa(dataToEncrypt)}function decrypt(data){return JSON.parse(atob(data))}}}]);